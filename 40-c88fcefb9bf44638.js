"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[40],{40040:function(e,t,n){n.d(t,{q:function(){return a}});var i=n(97094),r=n(10495),o=n(89134),s=n(91373);let u={background_enhance:{model:"rhino-tensorrt"},face_enhance:{model:"remini"}};var l=n(96857);let a=(0,i.Ue)()((0,o.tJ)((e,t)=>({steps:{},answers:{},history:[],initialStepId:void 0,photoTaskId:void 0,photoModelId:void 0,bulkUploadId:void 0,isPhotoUploadConsentGiven:!1,userCanSkipUploadStep:!1,enhancePipeline:u,multipleResultsTooltipShown:!1,emailResultsTaskId:"",surveyRecap:{},aiConfigurationOverride:void 0,stylizationMultiOptions:{},colorPalette:void 0,_colorPaletteContributions:{},userPersonality:void 0,_userPersonalityContributions:{},hasSkippedUploadStep:!1,loadSteps:t=>{for(let e of t)(0,l.KX)(e.content)&&(e.content.answers=function(e){if((0,l.KX)(e.content)){let t=[...e.content.answers];if((0,l.y2)(e.content))return(0,s.TV)(t),t;if((0,l.Tm)(e.content)&&e.content.answerRandomizationType){let n="fixedIds"in e.content.answerRandomizationType?e.content.answerRandomizationType.fixedIds:[];if(n&&0!==n.length)return(0,s.nb)(t,n)}return t}return[]}(e));e(()=>({steps:t.reduce((e,t)=>(e[t.id]={...t.content,id:t.id,finalRecap:t.finalRecap,contributesToColorPalette:t.contributesToColorPalette,estimatedDistanceToEnd:t.estimatedDistanceToEnd},e),{}),initialStepId:t.length>0?t[0].id:void 0}))},saveAnswer:(t,n)=>e(e=>({answers:{...e.answers,[t]:n}})),getNextStepId:(e,n)=>{var i,o,s;let u=t().steps[e];if(!u)return r.$9;if((0,l.gb)(u)||(0,l.XT)(u)||(0,l.Nq)(u)||(0,l.QA)(u))return u.nextStepId;if((0,l.KX)(u)){let e=null===(i=u.answers.find(e=>n.includes(e.id)))||void 0===i?void 0:i.nextStepId;return void 0===e?u.defaultNextStepId:e}return(0,l.et)(u)?(null===(s=u.revealed.answers)||void 0===s?void 0:null===(o=s.find(e=>n.includes(e.id)))||void 0===o?void 0:o.nextStepId)||u.defaultNextStepId:r.$9},getNextQuestionId:e=>{let{steps:n,getNextStepId:i}=t();if(!n[e])return r.$9;let o=n[i(e,[])];for(;(null==o?void 0:o.type)===r.WU.Intermediate&&o.nextStepId!==r.$9;)o=n[o.nextStepId];return o?o.id:r.$9},getSkipNextStepId:e=>{let{steps:n,getNextQuestionId:i}=t(),o=n[e];return o?((0,l.gb)(o)||(0,l.XT)(o))&&o.skipNextStepId?o.skipNextStepId:i(e):r.$9},getPreviousStepId:()=>{let{history:e}=t();return e[e.length-2]||null},getPercentageProgress:(e,n)=>{var i,r;let o=t().initialStepId;if(!o)return 0;let s=null===(i=t().steps[o])||void 0===i?void 0:i.estimatedDistanceToEnd,u=null===(r=t().steps[e])||void 0===r?void 0:r.estimatedDistanceToEnd;if(s&&u){if(n){let e=s/4;return Math.min(Math.max(Math.ceil((s-u+1)/e)*e/s*100,0),100)}return Math.min(Math.max((s-u+1)/s*100,0),100)}let l=Object.keys(t().steps).length,a=t().history.length;return 0===l?0:Math.min(a/l*100,100)},popHistoryUpTo:(t,n)=>{e(e=>{let i=[...e.history],r=i.indexOf(t);return -1!==r&&i.splice(n?r:r+1),{history:i}})},pushHistory:t=>{e(e=>{let n=[...e.history];return n.push(t),{history:n}})},resetHistory:()=>e(()=>({history:[],answers:{},surveyRecap:{},enhancePipeline:u,colorPalette:void 0,_colorPaletteContributions:{},userPersonality:void 0,_userPersonalityContributions:{},photoTaskId:void 0,photoModelId:void 0,bulkUploadId:void 0,aiConfigurationOverride:void 0})),setPhotoTaskId:t=>e(()=>({photoTaskId:t})),setPhotoModelId:t=>e(()=>({photoModelId:t})),setBulkUploadId:t=>e(()=>({bulkUploadId:t})),setIsPhotoUploadConsentGiven:t=>e(()=>({isPhotoUploadConsentGiven:t})),setUserCanSkipUploadStep:t=>e(()=>({userCanSkipUploadStep:t})),setMultipleResultsTooltipShown:t=>e(()=>({multipleResultsTooltipShown:t})),setEmailResultsTaskId:t=>e(()=>({emailResultsTaskId:t})),setAiConfigurationOverride:t=>e(()=>({aiConfigurationOverride:t})),pushSurveyRecap:t=>e(e=>({surveyRecap:{...e.surveyRecap,[t.title]:{title:t.title,icon:t.icon,value:t.value}}})),pushStylizationOption:(t,n)=>e(e=>({stylizationMultiOptions:{...e.stylizationMultiOptions,[t]:n}})),pushEnhancePipelineStep:t=>e(e=>({enhancePipeline:{...e.enhancePipeline,...t}})),popEnhancePipelineStep:t=>e(e=>{let n={...e.enhancePipeline};return delete n[t],{enhancePipeline:n}}),pushColorPaletteContribution:(t,n)=>e(e=>{let i={...e._colorPaletteContributions,[t]:n},o=function(e){let t;let n={[r.VZ.Spring]:0,[r.VZ.Summer]:0,[r.VZ.Autumn]:0,[r.VZ.Winter]:0};Object.values(e).forEach(e=>{e&&Object.entries(e).forEach(e=>{let[t,i]=e;void 0!==i&&(n[t]+=i)})});let i=Object.keys(n),o=-1/0;for(let e of i)n[e]>o&&(o=n[e],t=e);if(!(o<=0))return t}(i);return{_colorPaletteContributions:i,colorPalette:o}}),pushUserPersonalityContribution:(t,n)=>e(e=>{let i={...e._userPersonalityContributions,[t]:n},o=function(e){let t={[r.A1.Innovator]:0,[r.A1.Creator]:0,[r.A1.Supporter]:0};Object.values(e).forEach(e=>{e&&Object.entries(e).forEach(e=>{let[n,i]=e;t[n]+=i})});let n=Object.values(t).reduce((e,t)=>e+t,0);if(0!==n)return{[r.A1.Innovator]:t[r.A1.Innovator]/n*100,[r.A1.Creator]:t[r.A1.Creator]/n*100,[r.A1.Supporter]:t[r.A1.Supporter]/n*100}}(i);return{_userPersonalityContributions:i,userPersonality:o}}),setHasSkippedUploadStep:t=>e(()=>({hasSkippedUploadStep:t}))}),{name:"surveySteps"}))},96857:function(e,t,n){n.d(t,{A$:function(){return P},Bo:function(){return v},Cq:function(){return s},K1:function(){return y},KX:function(){return o},Nq:function(){return l},Px:function(){return h},QA:function(){return a},Rx:function(){return p},Tm:function(){return f},XT:function(){return u},YQ:function(){return I},e2:function(){return S},et:function(){return d},gb:function(){return r},wm:function(){return m},y2:function(){return c}});var i=n(10495);function r(e){return e.type===i.WU.Intermediate}function o(e){return e.type===i.WU.Question}function s(e){return o(e)||d(e)}function u(e){return e.type===i.WU.UploadScreen}function l(e){return e.type===i.WU.BeforeAfter}function a(e){return e.type===i.WU.Slider}function d(e){return e.type===i.WU.ContentReveal}function p(e){return!!o(e)&&e.isMultipleChoice}function c(e){return!!e.answerRandomizationType&&e.answerRandomizationType.type===i.st.Full}function f(e){return!!e.answerRandomizationType&&e.answerRandomizationType.type===i.st.Fixed}function v(e){let t=o(e)?e.answers:e.revealed.answers;return!!t&&t.some(e=>"imagePath"in e.content)}function h(e){return(o(e)?e.answersType:e.revealed.answerType)===i.FP.ImagesList}function y(e){return(o(e)?e.answersType:e.revealed.answerType)===i.FP.ImagesListConfirm}function S(e){let t=o(e)?e.answers:e.revealed.answers;return!!t&&t.some(e=>"text"in e.content)}function m(e){let t=o(e)?e.answers:e.revealed.answers;return!!t&&t.some(e=>"rating"in e.content)}function P(e){let t=o(e)?e.answers:e.revealed.answers;return!!t&&t.some(e=>"buttonLabel"in e.content)}function I(e,t){return d(e)?t?e.revealed.title:e.concealed.title:e.title}},91373:function(e,t,n){function i(e){e.sort(()=>Math.random()-.5)}function r(e){let t=e.slice();return i(t),t}function o(e,t){let n=[];e.forEach((e,i)=>{(null==t?void 0:t.includes(e.id))&&n.push([e,i])});let r=e.filter(e=>!(null==t?void 0:t.includes(e.id)));for(let e of(i(r),n))r.splice(e[1],0,e[0]);return r}n.d(t,{TV:function(){return i},nb:function(){return o},yg:function(){return r}})}}]);